<!DOCTYPE html>
<html>
<head>
  <title>IBL 2024 player season stats</title>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jQuery-3.6.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../DataTables/jquery.dataTables.min.css"/>
  <link rel="stylesheet" type="text/css" href="../DataTables/fixedColumns.dataTables.min.css"/>
  <style>
    h1 {text-align: center;}
    th, td { white-space: nowrap; }
    div.dataTables_wrapper {
        width: 1000px;
        margin: 0 auto;
    }
  </style>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jquery.dataTables.min.js"></script>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/dataTables.fixedColumns.min.js"></script>


</head>
<body>
  <h1>IBL 2024 player season stats</h1>
  <div id="container2">
    <table class="inputs">
      <tbody>
        <tr>
          <label for="stat1">Choose filter:</label>

          <select name="stat1" id="stat1">
            <option selected disabled>Filter 1</option>
            <option value="32">MIN/G</option>
            <option value="33">PTS/G</option>
          </select>
          <td>Minimum:</td>
          <td><input type="text" id="min1" name="min1"></td>
        </tr>
        <tr>
          <td>Maximum:</td>
          <td><input type="text" id="max1" name="max1"></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div id="container">
  </div>
  <script type="text/javascript" language="javascript" charset="utf8">
  $(document).ready(function() {

    $('#container').load('BoxscorePLSEASON.html', function() {
      var table = $('#BOXPLSEASON').DataTable( {
            scrollY:        "400px",
            scrollX:        true,
            scrollCollapse: true,
            paging:         false,
            fixedColumns: {
              leftColumns:2,
              rightColumns:0
            },
            initComplete: function () {
              // Ensure tfoot exists
              if (!$('#BOXPLSEASON tfoot').length) {
                  $('#BOXPLSEASON').append('<tfoot><tr></tr></tfoot>');
                  $('#BOXPLSEASON thead th').each(function () {
                      $('#BOXPLSEASON tfoot tr').append('<th></th>');
                  });
              }
              this.api()
                  .columns([0,1,2])
                  .every(function () {
                      var column = this;

                      // Create select element and listener
                      var select = $('<select><option value=""></option></select>')
                          .appendTo($(column.footer()).empty())
                          .on('change', function () {
                              column
                                  .search($(this).val(), {exact: true})
                                  .draw();
                          });

                      // Add list of options
                      column
                          .data()
                          .unique()
                          .sort()
                          .each(function (d, j) {
                              select.append(
                                  '<option value="' + d + '">' + d + '</option>'
                              );
                          });
                  });
            }
          });

      var minEl = $('#min1');
      var maxEl = $('#max1');
      var index1 = $('#stat1').find(":selected").val();
      $('#stat1').on("change", function() {
        index1 = $('#stat1').find(":selected").val();
      });
      // Custom range filtering function
      $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
          var min = parseInt(minEl.val(), 10);
          var max = parseInt(maxEl.val(), 10);
          var range = parseFloat(data[index1]) || 0; // use data for the column

          if (
              (isNaN(min) && isNaN(max)) ||
              (isNaN(min) && range <= max) ||
              (min <= range && isNaN(max)) ||
              (min <= range && range <= max)
          ) {
              return true;
          }

          return false;
      });

      // Changes to the inputs will trigger a redraw to update the table
      minEl.on('input', function () {
          table.draw();
      });
      maxEl.on('input', function () {
          table.draw();
      });
    });
  });

  </script>
</body>
</html>
