<!DOCTYPE html>
<html>
<head>
  <title>IBL 2024 player season stats</title>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jQuery-3.6.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../DataTables/jquery.dataTables.min.css"/>
  <link rel="stylesheet" type="text/css" href="../DataTables/fixedColumns.dataTables.min.css"/>
  <style>
    h1 {text-align: center;}
    th, td { white-space: nowrap; }
    div.dataTables_wrapper {
        width: 1000px;
        margin: 0 auto;
    }
  </style>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jquery.dataTables.min.js"></script>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/dataTables.fixedColumns.min.js"></script>


</head>
<body>
  <h1>IBL 2024 player season stats</h1>
  <div id="container2">
    <table class="inputs">
      <tbody>
        <tr>
          <label for="stat1">Choose filter:</label>

          <select name="stat1" id="stat1">
            <option selected disabled>Filter 1</option>
            <option value="32">MIN/G</option>
            <option value="33">PTS/G</option>
          </select>
          <td>Minimum:</td>
          <td><input type="text" id="min1" name="min1"></td>
        </tr>
        <tr>
          <td>Maximum:</td>
          <td><input type="text" id="max1" name="max1"></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div id="container">
  </div>
  <script type="text/javascript" language="javascript" charset="utf8">
  $(document).ready(function() {

    $('#container').load('BoxscorePLSEASON.html', function() {
      var table = $('#BOXPLSEASON').DataTable( {
            scrollY:        "400px",
            scrollX:        true,
            scrollCollapse: true,
            paging:         false,
            fixedColumns: {
              leftColumns:2,
              rightColumns:0
            }
            initComplete: function () {
              count = 0;
              this.api().columns().every( function () {
                  var title = this.header();
                  //replace spaces with dashes
                  title = $(title).html().replace(/[\W]/g, '-');
                  var column = this;
                  var select = $('<select id="' + title + '" class="select2" ></select>')
                      .appendTo( $(column.footer()).empty() )
                      .on( 'change', function () {
                        //Get the "text" property from each selected data
                        //regex escape the value and store in array
                        var data = $.map( $(this).select2('data'), function( value, key ) {
                          return value.text ? '^' + $.fn.dataTable.util.escapeRegex(value.text) + '$' : null;
                                   });

                        //if no data selected use ""
                        if (data.length === 0) {
                          data = [""];
                        }

                        //join array into string with regex or (|)
                        var val = data.join('|');

                        //search for the option(s) selected
                        column
                              .search( val ? val : '', true, false )
                              .draw();
                      } );

                  column.data().unique().sort().each( function ( d, j ) {
                      select.append( '<option value="'+d+'">'+d+'</option>' );
                  } );

                  //use column title as selector and placeholder
                  $('#' + title).select2({
                    multiple: true,
                    closeOnSelect: false,
                    placeholder: "Select a " + title
                  });

                  //initially clear select otherwise first option is selected
                  $('.select2').val(null).trigger('change');
                } );
            }
          });

      var minEl = $('#min1');
      var maxEl = $('#max1');
      var index1 = $('#stat1').find(":selected").val();
      $('#stat1').on("change", function() {
        index1 = $('#stat1').find(":selected").val();
      });
      // Custom range filtering function
      $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
          var min = parseInt(minEl.val(), 10);
          var max = parseInt(maxEl.val(), 10);
          var range = parseFloat(data[index1]) || 0; // use data for the column

          if (
              (isNaN(min) && isNaN(max)) ||
              (isNaN(min) && range <= max) ||
              (min <= range && isNaN(max)) ||
              (min <= range && range <= max)
          ) {
              return true;
          }

          return false;
      });

      // Changes to the inputs will trigger a redraw to update the table
      minEl.on('input', function () {
          table.draw();
      });
      maxEl.on('input', function () {
          table.draw();
      });
    });
  });

  </script>
</body>
</html>
