<!DOCTYPE html>
<html>
<head>
  <title>IBL 2024 player season stats</title>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jQuery-3.6.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../DataTables/jquery.dataTables.min.css"/>
  <link rel="stylesheet" type="text/css" href="../DataTables/fixedColumns.dataTables.min.css"/>
  <style>
    h1 {text-align: center;}
    th, td { white-space: nowrap; }
    div.dataTables_wrapper {
        width: 1000px;
        margin: 0 auto;
    }
    div.filter1 {
      display: inline-block;
      float: left;
    }
    div.filter2 {
      display: inline-block;
      float: left;
    }
  </style>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/jquery.dataTables.min.js"></script>
  <script type="text/javascript" language="javascript" charset="utf8" src="../DataTables/dataTables.fixedColumns.min.js"></script>


</head>
<body>
  <h1>IBL 2024 player season stats</h1>
  <div id="container2">
    <div class="filter1">
      <table class="inputs">
        <tbody>
          <tr>
            <label for="stat1">Choose filter:</label>

            <select name="stat1" id="stat1">
              <option selected disabled>Filter 1</option>
              <option value="8">MIN/G</option>
              <option value="13">FGA/G</option>
              <option value="39">USG%</option>
              <option value="40">MIN</option>
              <option value="43">FGA</option>
            </select>
            <td>Minimum:</td>
            <td><input type="text" id="min1" name="min1"></td>
          </tr>
          <tr>
            <td>Maximum:</td>
            <td><input type="text" id="max1" name="max1"></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="filter2">
      <table class="inputs">
        <tbody>
          <tr>
            <label for="stat2">Choose filter:</label>

            <select name="stat2" id="stat2">
              <option selected disabled>Filter 2</option>
              <option value="8">MIN/G</option>
              <option value="13">FGA/G</option>
              <option value="39">USG%</option>
              <option value="40">MIN</option>
              <option value="43">FGA</option>
            </select>
            <td>Minimum:</td>
            <td><input type="text" id="min2" name="min2"></td>
          </tr>
          <tr>
            <td>Maximum:</td>
            <td><input type="text" id="max2" name="max2"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div id="container">
  </div>
  <script type="text/javascript" language="javascript" charset="utf8">
  $(document).ready(function() {

    $('#container').load('BoxscorePLSEASON.html', function() {
      $('#BOXPLSEASON').append('<tfoot><tr></tr></tfoot>');
      $('#BOXPLSEASON thead th').clone().appendTo($("#BOXPLSEASON tfoot tr")) ;
      var table = $('#BOXPLSEASON').DataTable( {
            scrollY:        "400px",
            scrollX:        true,
            scrollCollapse: true,
            paging:         false,
            searching:      false,
            fixedColumns: {
              leftColumns:2,
              rightColumns:0
            },
            initComplete: function () {

              this.api()
              .columns([0,1,2,3])
              .every(function () {
                var column = this;

                // Create select element and listener
                var select = $('<select><option value=""></option></select>')
                .appendTo($(column.footer()).empty())
                .on('change', function () {
                  column
                  .search($(this).val(), {exact: true})
                  .draw();
                });

                // Add list of options
                column
                .data()
                .unique()
                .sort()
                .each(function (d, j) {
                  select.append(
                    '<option value="' + d + '">' + d + '</option>'
                  );
                });
              });
            }
          });

      var minEl1 = $('#min1');
      var maxEl1 = $('#max1');
      var index1 = $('#stat1').find(":selected").val() || 32;
      $('#stat1').on("change", function() {
        index1 = $('#stat1').find(":selected").val();
      });
      var minEl2 = $('#min2');
      var maxEl2 = $('#max2');
      var index2 = $('#stat2').find(":selected").val() || 8;
      $('#stat2').on("change", function() {
        index2 = $('#stat2').find(":selected").val();
      });
      // Custom range filtering function
      $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
          var min1 = parseInt(minEl1.val(), 10);
          var max1 = parseInt(maxEl1.val(), 10);
          var range1 = parseFloat(data[index1]) || 0; // use data for the column

          if (
              (isNaN(min1) && isNaN(max1)) ||
              (isNaN(min1) && range1 <= max1) ||
              (min1 <= range1 && isNaN(max1)) ||
              (min1 <= range1 && range1 <= max1)
          ) {
              return true;
          }

          return false;
      });
      // Changes to the inputs will trigger a redraw to update the table
      minEl1.on('input', function () {
          table.draw();
      });
      maxEl1.on('input', function () {
          table.draw();
      });

      $.fn.dataTable.ext.search.push(function (settings, data, dataIndex) {
        var min2 = parseInt(minEl2.val(), 10);
        var max2 = parseInt(maxEl2.val(), 10);
        var range2 = parseFloat(data[index2]) || 0; // use data for the column

        if (
          (isNaN(min2) && isNaN(max2)) ||
          (isNaN(min2) && range2 <= max2) ||
          (min2 <= range2 && isNaN(max2)) ||
          (min2 <= range2 && range2 <= max2)
        ) {
          return true;
        }

        return false;
      });
      minEl2.on('input', function () {
          table.draw();
      });
      maxEl2.on('input', function () {
          table.draw();
      });
    });
  });

  </script>
</body>
</html>
